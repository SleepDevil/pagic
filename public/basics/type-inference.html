<html>
  <head>
    <title>类型推论</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <aside>
      <nav>
        <ul>
          <li></li>
        </ul>
      </nav>
    </aside>
    <section>
      <article>
        <h1 id="%E7%B1%BB%E5%9E%8B%E6%8E%A8%E8%AE%BA">类型推论</h1>
        <p>
          如果没有明确的指定类型，那么 TypeScript 会依照类型推论（Type
          Inference）的规则推断出一个类型。
        </p>
        <h2
          id="%E4%BB%80%E4%B9%88%E6%98%AF%E7%B1%BB%E5%9E%8B%E6%8E%A8%E8%AE%BA"
        >
          什么是类型推论
        </h2>
        <p>以下代码虽然没有指定类型，但是会在编译的时候报错：</p>
        <pre
          class="language-ts"
        ><code class="language-ts"><span class="token keyword">let</span> myFavoriteNumber <span class="token operator">=</span> <span class="token string">'seven'</span><span class="token punctuation">;</span>
myFavoriteNumber <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// index.ts(2,1): error TS2322: Type 'number' is not assignable to type 'string'.</span>
</code></pre>
        <p>事实上，它等价于：</p>
        <pre
          class="language-ts"
        ><code class="language-ts"><span class="token keyword">let</span> myFavoriteNumber<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">'seven'</span><span class="token punctuation">;</span>
myFavoriteNumber <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// index.ts(2,1): error TS2322: Type 'number' is not assignable to type 'string'.</span>
</code></pre>
        <p>
          TypeScript
          会在没有明确的指定类型的时候推测出一个类型，这就是类型推论。
        </p>
        <p>
          <strong
            >如果定义的时候没有赋值，不管之后有没有赋值，都会被推断成
            <code>any</code> 类型而完全不被类型检查</strong
          >：
        </p>
        <pre
          class="language-ts"
        ><code class="language-ts"><span class="token keyword">let</span> myFavoriteNumber<span class="token punctuation">;</span>
myFavoriteNumber <span class="token operator">=</span> <span class="token string">'seven'</span><span class="token punctuation">;</span>
myFavoriteNumber <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
</code></pre>
        <h2 id="%E5%8F%82%E8%80%83">参考</h2>
        <ul>
          <li>
            <a
              href="http://www.typescriptlang.org/docs/handbook/type-inference.html"
              >Type Inference</a
            >（<a
              href="https://zhongsp.gitbooks.io/typescript-handbook/content/doc/handbook/Type%20Inference.html"
              >中文版</a
            >）
          </li>
        </ul>
        <hr />
        <ul>
          <li><a href="any.html">上一章：任意值</a></li>
          <li><a href="union-types.html">下一章：联合类型</a></li>
        </ul>
      </article>
    </section>
  </body>
</html>
